#per caricare le shared library
#Red Hat 5
#export LD_LIBRARY_PATH=/usr/local/ebus_sdk/lib:/usr/local/ebus_sdk/genicam/bin/Linux64_x64:$LD_LIBRARY_PATH
#Red Hat 6.1
#export LD_LIBRARY_PATH=/opt/pleora/ebus_sdk/lib:/opt/pleora/ebus_sdk/lib/genicam/bin/Linux64_x64:$LD_LIBRARY_PATH

CC=g++

#Red Hat 5
#CFLAGS=-o3 -c -fPIC  -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES -I/usr/local/mdsplus/include -I/usr/local/ebus_sdk/include -I../../CamUtils
#LDFLAGS= -shared -pthread -L/usr/local/mdsplus/lib64 -lCacheShr -lMdsObjectsCppShr -lMdsIpShr -L/usr/local/ebus_sdk/lib -lPvDevice -lPvStream
#LDFLAGS1= -L. -pthread -L/usr/local/mdsplus/lib64 -lCacheShr -lMdsObjectsCppShr -lMdsIpShr -L/usr/local/ebus_sdk/lib -lPvDevice -lPvStream -L/usr/local/SPIDER/Camera/lib -lflirsc65x -lcammdsutils -lcamstreamutils

#Red Hat 6.1
CFLAGS=-o3 -c -fPIC  -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES -I/usr/local/mdsplus/include -I/opt/pleora/ebus_sdk/include -I../../CamUtils
LDFLAGS= -shared -pthread -L/usr/local/mdsplus/lib -lMdsObjectsCppShr -lMdsIpShr -L/opt/pleora/ebus_sdk/lib -lPvDevice -lPvStream
LDFLAGS1= -L. -pthread -L/usr/local/mdsplus/lib -lMdsObjectsCppShr -lMdsIpShr -lcammdsutils -L/opt/pleora/ebus_sdk/lib -lPvDevice -lPvStream -L../../lib -lflirsc65x  -lcamstreamutils




#CFLAGS=-o3 -c -fPIC  -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES -I/home/mdsplus/taliercio/VideoTest/aravis-0.1.10/src -I/home/mdsplus/taliercio/VideoTest/include/glib-2.0 -I/home/mdsplus/taliercio/VideoTest/lib/glib-2.0/include -I/usr/include/libxml2 -I/usr/local/mdsplus/include -I/usr/local/ebus_sdk/include
#LDFLAGS= -shared -pthread -L/home/mdsplus/taliercio/VideoTest/lib -laravis-0.2 -L/usr/local/mdsplus/lib64 -lCacheShr -lMdsObjectsCppShr -lMdsIpShr -L/usr/local/ebus_sdk/lib -lPvDevice
#LDFLAGS1= -L. -pthread -L/home/mdsplus/taliercio/VideoTest/lib -laravis-0.2 -L/usr/local/mdsplus/lib64 -lflir655 -lCacheShr -lMdsObjectsCppShr -lMdsIpShr -L/usr/local/ebus_sdk/lib -lPvDevice

SOURCES=FLIRSC65X.cpp main.cpp
OBJ1=FLIRSC65X.o
OBJ2=main.o
OBJECTS=$(SOURCES:.cpp=.o)
SHAREDLIB=libflirsc65x.so 
EXE=testflirsc65x

all: $(SOURCES) $(EXE)
   
$(EXE): $(OBJECTS)
	$(CC) $(OBJ1) -o $(SHAREDLIB) $(LDFLAGS) 
	$(CC) $(OBJ2) -o $(EXE) $(LDFLAGS1) 
	cp -f $(SHAREDLIB) ../../lib
	cp -f $(EXE) ../../bin

.cpp.o:
	$(CC) $(CFLAGS) $< -o $@

clean:
	rm $(OBJECTS)
	rm $(SHAREDLIB)
	rm $(EXE)


