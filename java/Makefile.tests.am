include @top_builddir@/Makefile.inc
include $(top_srcdir)/testing/testing.am
include $(top_srcdir)/java/Makefile.inc.am

JUNIT = $(top_srcdir)/java/junit.jar \
		$(top_srcdir)/java/snakeyaml-1.17.jar \
		$(top_srcdir)/java/commons-lang-2.6.jar \
		$(top_srcdir)/java/commons-io-2.6.jar \
		$(top_srcdir)/java/tap4j-3.3.jar

CLEANFILES += *.log *.tap *.trs *.xml
TESTS_ENVIRONMENT += $(CLASSPATH_ENV)
VALGRIND_SUPPRESSIONS_FILES_PY = \
 $(top_srcdir)/conf/valgrind-java.supp \
 $(top_srcdir)/conf/valgrind-mdsplus.supp

@SKIP_JUNIT_TRUE@LOG_COMPILER = /bin/sh -c "exit 77";:
@SKIP_JUNIT_FALSE@LOG_COMPILER = $(abs_top_srcdir)/java/junittest $(srcdir)

install-javaDATA: $(java_DATA)

@SKIP_JUNIT_TRUE@$(TESTS):
@SKIP_JUNIT_FALSE@$(TESTS): $(main_JARS) tests.jar

# needed to set java for 32 (where available)
export JAVA_TARGET_ARCH
export JAVA_PATH_NAME
