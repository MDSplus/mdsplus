include @top_srcdir@/Makefile.inc

@MINGW_TRUE@ DEF=MdsSql.def

CFLAGS=@CFLAGS@ @SYBASE_INC@ @TARGET_ARCH@
LD_FLAGS=$(LDFLAGS) @TARGET_ARCH@
LIBS=@SYBASE_LIB@ @LIBS@ @DNET_STUB@ @LIBSOCKET@

SOURCES = \
dynamic_syb.c \
dbstubs.c

OBJECTS = $(SOURCES:.c=.o)
EXPORTS = MdsSql.export

all : @MAKELIBDIR@ @MAKELIBDIR@@LIBPRE@MdsSql@SHARETYPE@ @MAKELIBDIR@@LIBPRE@MdsSql.a

clean:
	@ $(RM) $(OBJECTS)
	@ $(RM) so_locations
	@ $(RM) @MAKELIBDIR@@LIBPRE@MdsSql@SHARETYPE@
	@ $(RM) @MAKELIBDIR@@LIBPRE@MdsSql.a


depend:
	 @makedepend -- $(CFLAGS) -- $(SOURCES)

install: $(DESTDIR)$(libdir)
	$(INSTALL) -m 644  @MAKELIBDIR@@LIBPRE@MdsSql.a $(DESTDIR)@libdir@
	$(INSTALL) -m 755  @MAKELIBDIR@@LIBPRE@MdsSql@SHARETYPE@ $(DESTDIR)@libdir@

@MAKELIBDIR@@LIBPRE@MdsSql@SHARETYPE@ : $(OBJECTS) $(DEF)
	$(LINK.c) -o $@ @LINKSHARED@ $(OBJECTS) $(DEF) -L@MAKELIBDIR@ $(LDFLAGS) $(LIBS)

@MAKELIBDIR@@LIBPRE@MdsSql.a : $(OBJECTS)
	$(AR) -cr $@ $(OBJECTS)
	$(RANLIB) $@
