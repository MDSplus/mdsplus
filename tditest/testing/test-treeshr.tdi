_shot=3
#current_shot('subtree')
TreeOpen('main',-1,1)
member
_nids=getnci('***','nid_number'),size(_nids)
getnci(_nids[100],'fullpath')
getnci(member,'rlength')
getnci(member,'length')
getnci(member,'on')
getnci('?ember','fullpath')
getnci('%ember','fullpath')
getnci('\n','fullpath')
_tim=getnci(member,'time_inserted')
date_time(_tim)
.subtree:a12:name
size(.subtree:a12:stop_trig)
kind(.subtree:a12:stop_trig)
'total of '//text(size(getnci('***','nid_number','signal')))//' signals'
'total of '//text(size(getnci('***','nid_number','action')))//' actions'
'total of '//text(size(getnci('***','nid_number','numeric')))//' numerics'
'total of '//text(size(_nids=getnci('***','nid_number','subtree')))//' subtrees'
getnci(_nids,'fullpath')
TreeClose()
TreeOpen('main,',-1,1)
size(getnci('***','nid_number'))
TreeOpen('main,subtree',-1,1)
size(getnci('***','nid_number'))
getnci(.subtree:a12,"class")
getnci(.subtree:a12,"dtype")
getnci(.subtree:a12,"usage")
getnci(.subtree:a12,"fullpath")
getnci(.subtree:a12,"minpath")
getnci(.subtree:a12,"node_name")
getnci(.subtree:a12:name,"original_part_name")
getnci(.subtree:a12,"path")
getnci(.subtree:a12,"compressible")
getnci(member,"compress_on_put")
getnci(member,"do_not_compress")
getnci(.subtree:a12,"essential")
getnci(.subtree:a12,"is_child")
getnci(.subtree:a12,"is_member")
getnci(.subtree:a12,"nid_reference")
getnci(.subtree:a12,"no_write_model")
getnci(.subtree:a12,"no_write_shot")
getnci(.subtree:a12,"parent_state")
getnci(.subtree:a12,"path_reference")
getnci(.subtree:a12,"setup_information")
getnci(.subtree:a12,"fullpath")
getnci(.subtree:a12,"state")
getnci(.subtree:a12,"usage_action")
getnci(.subtree:a12,"usage_any")
getnci(.subtree:a12,"usage_axis")
getnci(.subtree:a12,"usage_compound_data")
getnci(.subtree:a12,"usage_device")
getnci(.subtree:a12,"usage_dispatch")
getnci(.subtree:a12,"usage_numeric")
getnci(.subtree:a12,"usage_signal")
getnci(.subtree:a12,"usage_structure")
getnci(.subtree:a12,"usage_subtree")
getnci(.subtree:a12,"usage_task")
getnci(.subtree:a12,"usage_text")
getnci(.subtree:a12,"usage_window")
getnci(.subtree:a12,"write_once")
getnci(.subtree:a12,"depth")
getnci(.subtree:a12,"length")
getnci(.subtree:a12,"nid_number")
getnci(.subtree:a12,"number_of_children")
getnci(.subtree:a12,"number_of_members")
getnci(.subtree:a12,"parent_relationship")
getnci(.subtree:a12,"get_flags")
getnci(.subtree:a12,"owner_id")
getnci(.subtree:a12,"status")
getnci(.subtree:a12,"brother")
getnci(.subtree:a12,"child")
getnci(.subtree:a12,"member")
getnci(.subtree:a12,"parent")
getnci(.subtree:a12,"children_nids")
getnci(.subtree:a12,"conglomerate_nids")
getnci(.subtree:a12,"member_nids")
getnci(.subtree:a12,"time_inserted")
getnci(.subtree:a12,"conglomerate_elt")
getnci(.subtree:a12,"record")
getnci(.subtree:a12,"on")
getnci(.subtree:a12,"rlength")
TreeCreatePulseFile(_shot)
TreeClose('main',-1)
TreeOpen('main',_shot)
TreePutRecord(member,42)
member
TreePutRecord(member,build_with_units(1:1000,'volts'))
member
TreeOpen('main',-1,1)
TreeOpenEdit('main',_shot)
#should reopen _shot in edit mode
TreeClose('main',_shot)
#should leave model open and top tree
TreeDeletePulseFile(_shot)
TreeClose()
TreeOpenNew('main',_shot)
_nid=0
TreeAddNode('.child',_nid,1)
getnci(_nid,'usage')
TreeAddNode('action',_nid,2)
getnci(_nid,'usage')
TreeAddNode('device',_nid,3)
getnci(_nid,'usage')
TreeAddNode('dispatch',_nid,4)
getnci(_nid,'usage')
TreeAddNode('numeric',_nid,5)
getnci(_nid,'usage')
TreeAddNode('segs',_nid,6)
TreeAddNode('signal',_nid,6)
getnci(_nid,'usage')
TreeAddNode('task',_nid,7)
getnci(_nid,'usage')
TreeAddNode('text',_nid,8)
getnci(_nid,'usage')
TreeAddNode('window',_nid,9)
getnci(_nid,'usage')
TreeAddNode('axis',_nid,10)
getnci(_nid,'usage')
TreeAddNode('.subtree',_nid,11)
getnci(_nid,'usage')
_nid
getnci(0,"child")
getnci(0,"children_nids")
TreeAddTag('.child','child')
TreeAddTag('.child','child_tag2')
TreeAddTag('.child','child_tag3')
TreeAddTag('.child','child_tag4')
TreeAddTag('.child','child_tag5')
TreeAddTag('action','action')
TreeAddTag('device','device')
TreeAddTag('dispatch','dispatch')
TreeAddTag('numeric','numeric')
TreeAddTag('signal','signal')
TreeAddTag('task','task')
TreeAddTag('text','text')
TreeAddTag('window','window')
TreeAddTag('axis','axis')
TreeAddNode('tobedeleted',_nid,0)
_count=0
TreeShr->TreeDeleteNodeInitialize(val(getnci(tobedeleted,'nid_number')),ref(_count),val(0))
_count
TreeShr->TreeDeleteNodeExecute(),1
TreeShr->TreeEditing()
getnci(\child,'nid_number')
getnci(\child_tag2,'nid_number')
getnci(\child_tag3,'nid_number')
getnci(\child_tag4,'nid_number')
getnci(\child_tag5,'nid_number')
TreeShr->TreeRemoveTag(ref('child_tag2\0'))
getnci(\child,'nid_number')
getnci('\\child_tag2','nid_number')
getnci(\child_tag3,'nid_number')
getnci(\child_tag4,'nid_number')
getnci(\child_tag5,'nid_number')
TreeShr->TreeVerify()
TreePutRecord(action,Build_Action(Build_Dispatch(2, "CAMAC_SERVER", "INIT", *, *), Build_Method(*, "INIT", ACTION), *, *, *))
action
TreePutRecord(device,Build_Conglom("MIT$DEVICES", "A12", *, *))
device
TreePutRecord(dispatch,Build_Dispatch(2, "CAMAC_SERVER", "INIT", *, *))
dispatch
TreePutRecord(numeric,42)
numeric
TreePutRecord(signal,build_signal($value*100,`data(1:40),build_dim(build_window(1,40,-4.),* : * : 1E-4)))
signal
TreePutRecord(signal,build_signal($value*100,`data(1:8140),build_dim(build_window(1,8140,-4.),* : * : 1E-4)))
signal,1
TreePutRecord(signal,build_signal($value*100,`data(1:8140),build_dim(build_window(1,8140,-4.),* : * : 1E-4)))
signal,1
_len=getnci(signal,'length');'different on 32 vs 64bit'
getnci(signal,'rlength')
TreePutRecord(task,Build_Method(*, "INIT", ACTION))
task
TreePutRecord(text,"This is a test")
text
TreePutRecord(window,build_window(1,40,-4.))
window
TreePutRecord(axis,1E-4 : 20E-4 : 1E-4)
axis
MakeSegment(segs, 1,10, 1:10,data(1:10),*,10)
segs
MakeSegment(segs,11,20,11:20,data(1:10),*, 9)
segs
TreePutRecord(segs,)
BeginSegment(segs,0.,99.,0.:99.,data(0:99))
putsegment(segs,-1,data(0:9))
data(getsegment(segs, 0))
data(dim_of(getsegment(segs, 0)))
TreeWrite('main',_shot)
TreeClose()
TreeShr->TreeCompressDatafile(ref('main'),val(_shot))
TreeOpen('main',_shot)
_len==getnci(signal,'length')
getnci(signal,'rlength')
data(signal)[1:100]
TreeClose()
TreeOpen('main',-1,1)
TreeDeletePulseFile(_shot)
TreeClose()
TreeOpen('subtree', -1)
Tcl('dir *:***:startidx')
Tcl('dir *:input_01:startidx')
dir 1*
treeopennew('main',-1)
treeaddnode('B',_n,6)
treeWrite()
TreeShr->_TreeSetXNci(val(TreeShr->TreeDbid:P()),val(1),ref("MyAttr"),descr(123))
_dat=SIN(_dim=0:($2PI):.1);TreeShr->_TreeXNciMakeSegment(val(TreeShr->TreeDbid:P()),val(1),ref("MySeg"),descr(0.),descr($2PI),descr(_dim),descr(_dat),val(-1),val(SHAPE(_dim)[0]))
List(_d=_t=*,TreeShr->_TreeXNciGetSegment(val(TreeShr->TreeDbid:P()),val(1),ref("MYSEG"),val(0),xd(_d),xd(_t)),ALL(_t==_dim),ALL(_d==_dat))
List(_d=*,TreeShr->_TreeGetXNci(val(TreeShr->TreeDbid:P()),val(1),ref("AttributeNames"),xd(_d)),_d)
List(_d=*,TreeShr->_TreeGetXNci(val(TreeShr->TreeDbid:P()),val(1),ref("MYSEG"),xd(_d)),_d)
List(_d=*,TreeShr->_TreeGetXNci(val(TreeShr->TreeDbid:P()),val(1),ref("MYATTR"),xd(_d)),_d)
tcl('compress main')
treeopen('main',-1,1)
List(_d=_t=*,TreeShr->_TreeXNciGetSegment(val(TreeShr->TreeDbid:P()),val(1),ref("MYSEG"),val(0),xd(_d),xd(_t)),ALL(_t==_dim),ALL(_d==_dat))
List(_d=*,TreeShr->_TreeGetXNci(val(TreeShr->TreeDbid:P()),val(1),ref("AttributeNames"),xd(_d)),_d)
List(_d=*,TreeShr->_TreeGetXNci(val(TreeShr->TreeDbid:P()),val(1),ref("MYSEG"),xd(_d)),_d)
List(_d=*,TreeShr->_TreeGetXNci(val(TreeShr->TreeDbid:P()),val(1),ref("MYATTR"),xd(_d)),_d)
